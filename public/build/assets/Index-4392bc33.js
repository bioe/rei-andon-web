import{l as B,v as V,h as a,a as m,u as o,w as _,F as r,o as l,X as j,d,t as s,b as e,e as A,f as g,g as I,A as N,z as f,c as k,j as p,O as $}from"./app-5e233097.js";import{P as C}from"./PrimaryButton-7e35f08e.js";import{H as w,f as b,a as D,_ as E}from"./helper-3aec6562.js";import{A as T}from"./AuthenticatedLayout-2a69091e.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./FlashAlert-2f675c77.js";const z={class:"my-3 p-3 bg-body rounded shadow-sm"},H=["onSubmit"],M={class:"row mb-3"},F={class:"col-md-3"},K={class:"form-floating mb-3"},L=e("label",{for:"keywordInput"},"Keyword",-1),P={class:"col-md-3"},R={class:"form-floating mb-3"},U=e("option",{value:null},"All",-1),G=["value"],X=e("label",{for:"zoneInput"},"Zone",-1),Z={class:"col-12"},q=e("i",{class:"bi bi-search"},null,-1),J={class:"table table-bordered table-striped table-hover"},Q={key:0,width:"5%"},W=["onClick"],Y=e("i",{class:"bi bi-trash"},null,-1),ee=[Y],te=e("br",null,null,-1),se=e("br",null,null,-1),oe=e("br",null,null,-1),le=e("br",null,null,-1),be={__name:"Index",props:{header:{type:Object},filters:{type:Object},list:{type:Object,default:()=>({})},segments:{type:Object}},setup(i){const x=i,h="statusrecords",y=B("Records"),n=V(x.filters),O=c=>{n.sort.field=c,n.sort.direction=n.sort.direction==""||n.sort.direction=="desc"?"asc":"desc",v()},v=()=>{n.get(route(h+".index"),{preserveScroll:!0})},S=(c,u)=>{confirm(`Delete this status ${u} ?`)&&$.delete(route(h+".destroy",c))};return(c,u)=>(l(),a(r,null,[m(o(j),{title:y.value},null,8,["title"]),m(T,null,{header:_(()=>[d(s(y.value),1)]),default:_(()=>[e("div",z,[e("form",{onSubmit:A(v,["prevent"])},[e("div",M,[e("div",F,[e("div",K,[g(e("input",{"onUpdate:modelValue":u[0]||(u[0]=t=>o(n).keyword=t),type:"text",class:"form-control",id:"keywordInput",placeholder:"Keyword",autocomplete:"off"},null,512),[[I,o(n).keyword]]),L])]),e("div",P,[e("div",R,[g(e("select",{"onUpdate:modelValue":u[1]||(u[1]=t=>o(n).segment_code=t),class:"form-select",id:"zoneInput"},[U,(l(!0),a(r,null,f(i.segments,t=>(l(),a("option",{value:t.code},s(t.code),9,G))),256))],512),[[N,o(n).segment_code]]),X])]),e("div",Z,[m(C,{type:"submit",disabled:o(n).processing},{default:_(()=>[q,d(" Search ")]),_:1},8,["disabled"])])])],40,H),e("table",J,[e("thead",null,[e("tr",null,[c.$page.props.auth.isEditable?(l(),k(w,{key:0},{default:_(()=>[d("Actions")]),_:1})):p("",!0),(l(!0),a(r,null,f(i.header,t=>(l(),k(w,{field:t.field,sort:t.sortable?i.filters.sort:null,onSortEvent:O,disabled:o(n).processing},{default:_(()=>[d(s(t.title),1)]),_:2},1032,["field","sort","disabled"]))),256))])]),e("tbody",null,[(l(!0),a(r,null,f(i.list.data,(t,ne)=>(l(),a("tr",null,[c.$page.props.auth.isEditable?(l(),a("td",Q,[e("button",{onClick:ae=>S(t.id,t.id),class:"btn btn-sm btn-link"},ee,8,W)])):p("",!0),e("td",null,s(t.machine_code),1),e("td",null,s(t.segment_code),1),e("td",null,[t.employee_name!=null?(l(),a(r,{key:0},[d(s(t.employee_name),1)],64)):(l(),a(r,{key:1},[d(s(t.employee_code),1)],64))]),e("td",null,s(o(b)(t.created_at)),1),e("td",null,[d(s(t.status.code),1),te,d(" "+s(t.status.name),1)]),e("td",null,[t.attending?(l(),a(r,{key:0},[d(s(o(b)(t.attending.created_at))+" ",1),se,d(" By: "+s(t.attending.employee_name),1)],64)):p("",!0),t.ask_help_at?(l(),a(r,{key:1},[oe,le,d(" Help: "+s(o(D)(t.ask_help_at)),1)],64)):p("",!0)]),e("td",null,s(o(b)(t.attended_at)),1),e("td",null,s(o(b)(t.resolved_at)),1),e("td",null,s(o(b)(t.completed_at)),1)]))),256))])]),m(E,{data:i.list},null,8,["data"])])]),_:1})],64))}};export{be as default};
