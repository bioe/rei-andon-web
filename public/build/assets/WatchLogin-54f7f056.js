import{l as m,v as U,c as V,w as d,o as _,a as o,u as s,X as E,b as a,n as r,f as v,g as w,h as y,d as b,F as C,i as M,e as W,m as I}from"./app-6d967542.js";import{_ as S,G as $}from"./GuestPrimaryButton-0856ed34.js";import{_ as x}from"./InputError-8847a956.js";import{_ as L}from"./Alert-bd18fd29.js";import"./_plugin-vue_export-helper-c27b6911.js";const q=a("h1",{class:"h3 mb-3 fw-normal"},"Andon Watch Login",-1),A=["onSubmit"],F=a("label",{for:"floatingCode"},"Watch Code",-1),G=a("label",{for:"floatingUsername"},"Employee Code",-1),z=a("span",{class:"spinner-grow spinner-grow-sm","aria-hidden":"true"},null,-1),D=a("span",{role:"status"},"Connecting...",-1),P={class:"mt-4"},O={__name:"WatchLogin",props:{timeout_sec:{type:Number},watch_login_log_id:{type:Number}},setup(k){const f=k,n=m(!1),i=m(""),c=m(""),e=U({watch_code:"w001",username:"0000"}),B=()=>{n.value=!0,c.value="",i.value="",e.post(route("watch_login"),{onSuccess:l=>N(),onError:()=>n.value=!1})};let g=null,h=null;const N=()=>{g=setInterval(T,1e3,f.watch_login_log_id),h=setTimeout(()=>{p(),c.value="Unable to login, please try again."},f.timeout_sec)};function T(l){I.get(route("watch_is_login",l)).then(function(t){t.data.success&&(p(),e.reset(),i.value=t.data.message)}).catch(function(){})}function p(){clearInterval(g),clearTimeout(h),n.value=!1}return(l,t)=>(_(),V(S,null,{default:d(()=>[o(s(E),{title:"Watch Login"}),q,o(L,{message:i.value,status:"success"},null,8,["message"]),o(L,{message:c.value,status:"danger"},null,8,["message"]),a("form",{onSubmit:W(B,["prevent"])},[a("div",{class:r(["form-floating",{"is-invalid":s(e).errors.watch_code}])},[v(a("input",{type:"text",class:r(["form-control",{"is-invalid":s(e).errors.watch_code}]),id:"floatingCode",placeholder:"Code","onUpdate:modelValue":t[0]||(t[0]=u=>s(e).watch_code=u),required:"",autocomplete:"false"},null,2),[[w,s(e).watch_code]]),F],2),o(x,{class:"my-1",message:s(e).errors.watch_code},null,8,["message"]),a("div",{class:r(["form-floating my-2",{"is-invalid":s(e).errors.username}])},[v(a("input",{type:"text",class:r(["form-control",{"is-invalid":s(e).errors.username}]),id:"floatingUsername","onUpdate:modelValue":t[1]||(t[1]=u=>s(e).username=u),placeholder:"Employee Code",required:"",autocomplete:"false"},null,2),[[w,s(e).username]]),G],2),o(x,{class:"my-1",message:s(e).errors.username},null,8,["message"]),o($,{disabled:n.value},{default:d(()=>[n.value?(_(),y(C,{key:0},[z,D],64)):(_(),y(C,{key:1},[b(" Log in ")],64))]),_:1},8,["disabled"]),a("div",P,[o(s(M),{href:l.route("login")},{default:d(()=>[b(" Admin Login ")]),_:1},8,["href"])])],40,A)]),_:1}))}};export{O as default};
